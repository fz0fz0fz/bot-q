"""
إعدادات البوت المركزية
"""
import os
from dataclasses import dataclass
from typing import Dict, Any

@dataclass
class Config:
    """إعدادات التطبيق الرئيسية"""
    
    # إعدادات قاعدة البيانات
    PG_HOST: str = os.getenv("PG_HOST", "dpg-d1qf0g24d50c7397llc0-a.oregon-postgres.render.com")
    PG_DB: str = os.getenv("PG_DB", "remainders")
    PG_USER: str = os.getenv("PG_USER", "remainders_user") 
    PG_PASSWORD: str = os.getenv("PG_PASSWORD", "c6G6dvxL4Y0PRZtNaZiP0mh2R5QVA0nr")
    PG_PORT: int = int(os.getenv("PG_PORT", "5432"))
    
    # إعدادات API
    WASENDER_API_KEY: str = os.getenv("WASENDER_API_KEY", "")
    WASENDER_BASE_URL: str = "https://wasenderapi.com/api"
    
    # إعدادات التطبيق
    ADMIN_PHONE: str = "966503813344"  # رقم الإدمن لاستقبال الشكاوى
    
    # إعدادات الحماية
    RATE_LIMIT_MESSAGES: int = 10  # عدد الرسائل المسموحة
    RATE_LIMIT_WINDOW: int = 60    # في ثانية
    
    # إعدادات الخدمات
    MAX_WORKERS_PER_CATEGORY: int = 50
    MAX_DRIVERS_DISPLAY: int = 20
    
    @property
    def db_connection_params(self) -> Dict[str, Any]:
        """معاملات الاتصال بقاعدة البيانات"""
        return {
            "host": self.PG_HOST,
            "dbname": self.PG_DB,
            "user": self.PG_USER,
            "password": self.PG_PASSWORD,
            "port": self.PG_PORT,
            "sslmode": "require"
        }

# إنشاء instance واحد من الإعدادات
config = Config()

# رسائل النظام
SYSTEM_MESSAGES = {
    "welcome": """
🌟 *مرحباً بك في دليل خدمات القرين* 🌟

أهلاً وسهلاً! نحن هنا لنساعدك في الوصول لأفضل الخدمات في منطقة القرين.

📱 *كيفية الاستخدام:*
• اختر رقم الخدمة من القائمة أدناه
• أرسل `0` للعودة للقائمة الرئيسية في أي وقت
• أرسل `مساعدة` للحصول على المساعدة

═══════════════════════
""",

    "main_menu": """
📖 *دليلك لخدمات القرين*

👋 اختر رقم الخدمة من القائمة أدناه:

*🏢 الخدمات الحكومية والطبية:*
1️⃣ خدمات حكومية 🏛️
2️⃣ صيدليات 💊

*🛒 التسوق والمواد الغذائية:*
3️⃣ بقالة 🥤
4️⃣ خضار وفواكه 🥬
5️⃣ حلويات وأسر منتجة 🍮
6️⃣ مطاعم 🍔

*🏪 المحلات والخدمات:*
7️⃣ محلات عامة 🏪
8️⃣ شاليهات واستراحات 🏖️
9️⃣ نقل بضائع (وايت) 🚛
🔟 مواد بناء وشيول 🧱

*👷 العمالة والخدمات المهنية:*
1️⃣1️⃣ عمال ومهنيين 👷
1️⃣2️⃣ محلات مهنية 🔨
1️⃣3️⃣ ذبائح وملاحم 🥩

*🚗 النقل والتأجير:*
1️⃣4️⃣ نقل مدرسي ومشاوير 🚍
1️⃣5️⃣ تأجير 📦

═══════════════════════
💬 *للاقتراحات والشكاوى:* أرسل `100`
❓ *للمساعدة:* أرسل `مساعدة`
═══════════════════════
""",

    "help": """
❓ *دليل المساعدة - بوت خدمات القرين*

🔢 *الأرقام المدعومة:*
• الأرقام العربية: ١٢٣٤٥٦٧٨٩٠
• الأرقام الإنجليزية: 1234567890
• يمكنك أيضاً كتابة "صفر" أو "." للعودة للقائمة

⭐ *الأوامر الخاصة:*
• `0` أو `صفر` - العودة للقائمة الرئيسية
• `100` - إرسال اقتراح أو شكوى
• `مساعدة` - عرض هذه المساعدة

🚗 *خدمة النقل المدرسي (14):*
• `تسجيل` أو `88` - تسجيل كسائق جديد
• `حذف` أو `77` - حذف بياناتك كسائق

👷 *خدمة العمال (11):*
• `55` - تسجيل عامل جديد
• اختر رقم المهنة لعرض العمال

📞 *تنسيق أرقام الجوال:*
• 05xxxxxxxx
• 9665xxxxxxxx
• +9665xxxxxxxx

💡 *نصائح:*
• استخدم الأرقام للتنقل السريع
• جميع البيانات محفوظة بأمان
• يمكنك تعديل بياناتك في أي وقت

🆘 *مشكلة تقنية؟* أرسل `100` وصف المشكلة
""",

    "invalid_choice": "❗️ اختيار غير صحيح. أرسل رقم خدمة من القائمة أو `0` للقائمة الرئيسية.",
    
    "feedback_prompt": "💬 أرسل الآن رسالتك (اقتراح، شكوى، أو استفسار):",
    
    "feedback_thanks": "✅ شكراً لك! تم استلام رسالتك وسيتم الرد عليك قريباً.",
    
    "rate_limit": "⏳ يرجى الانتظار قليلاً قبل إرسال رسالة أخرى.",
    
    "technical_error": "❌ حدث خطأ تقني مؤقت. يرجى المحاولة مرة أخرى خلال دقائق."
}

# قوائم الخدمات مع تفاصيل أكثر
SERVICES_CONFIG = {
    "1": {
        "name": "خدمات حكومية",
        "icon": "🏛️",
        "description": "المعاملات الحكومية والإدارية"
    },
    "2": {
        "name": "صيدليات",
        "icon": "💊", 
        "description": "الصيدليات والخدمات الطبية"
    },
    "3": {
        "name": "بقالة",
        "icon": "🥤",
        "description": "البقالات والمواد الغذائية"
    },
    "4": {
        "name": "خضار وفواكه", 
        "icon": "🥬",
        "description": "محلات الخضار والفواكه الطازجة"
    },
    "5": {
        "name": "حلويات وأسر منتجة",
        "icon": "🍮", 
        "description": "الحلويات والمنتجات المنزلية"
    },
    "6": {
        "name": "مطاعم",
        "icon": "🍔",
        "description": "المطاعم والوجبات السريعة"
    },
    "7": {
        "name": "محلات عامة",
        "icon": "🏪",
        "description": "المحلات التجارية المتنوعة"
    },
    "8": {
        "name": "شاليهات واستراحات",
        "icon": "🏖️",
        "description": "الشاليهات والاستراحات للإيجار"
    },
    "9": {
        "name": "نقل بضائع (وايت)",
        "icon": "🚛", 
        "description": "خدمات نقل البضائع والأثاث"
    },
    "10": {
        "name": "مواد بناء وشيول",
        "icon": "🧱",
        "description": "مواد البناء والمعدات الثقيلة"
    },
    "11": {
        "name": "عمال ومهنيين",
        "icon": "👷",
        "description": "العمالة المهنية المتخصصة",
        "has_subcategories": True
    },
    "12": {
        "name": "محلات مهنية", 
        "icon": "🔨",
        "description": "المحلات المهنية والورش"
    },
    "13": {
        "name": "ذبائح وملاحم",
        "icon": "🥩",
        "description": "الملاحم ومحلات اللحوم"
    },
    "14": {
        "name": "نقل مدرسي ومشاوير",
        "icon": "🚍", 
        "description": "خدمات النقل المدرسي والمشاوير",
        "has_registration": True
    },
    "15": {
        "name": "تأجير",
        "icon": "📦",
        "description": "خدمات التأجير المتنوعة"
    }
}
